const playlistMaliKadi = [
  {
    id: 1,
    titre: "Moussolou",
    artiste: "Oumou Sangar√©",
    genre: "Wassoulou",
    duree: 312,
  },
  {
    id: 2,
    titre: "Nyama Touti",
    artiste: "Doussou Bagayoko",
    genre: "Traditionnel",
    duree: 340,
  },
  {
    id: 3,
    titre: "Wara",
    artiste: "Abdoulaye Diabat√©",
    genre: "Mandingue",
    duree: 365,
  },
  {
    id: 4,
    titre: "Baro",
    artiste: "Salif Keita",
    genre: "Afro-Mandingue",
    duree: 380,
  },
  {
    id: 5,
    titre: "Diaraby N√©n√©",
    artiste: "Rokia Traor√©",
    genre: "Musique du monde",
    duree: 324,
  },
  {
    id: 6,
    titre: "Bimogo",
    artiste: "Habib Koit√©",
    genre: "Folk mandingue",
    duree: 290,
  },
  {
    id: 7,
    titre: "Ka√Øra",
    artiste: "Toumani Diabat√©",
    genre: "Kora",
    duree: 355,
  },
  {
    id: 8,
    titre: "Sowa",
    artiste: "Fatoumata Diawara",
    genre: "Afro-Folk",
    duree: 315,
  },
  {
    id: 8,
    titre: "Sabali",
    artiste: "Amadou & Mariam",
    genre: "Afro-Blues",
    duree: 204,
  },
  {
    id: 9,
    titre: "N'toman",
    artiste: "Ali Farka Tour√©",
    genre: "Blues Malien",
    duree: 336,
  },
  {
    id: 10,
    titre: "Djon Maya",
    artiste: "Boubacar Traor√©",
    genre: "Blues Malien",
    duree: 293,
  },
  {
    id: 11,
    titre: "Kanou",
    artiste: "Toumani Diabat√©",
    genre: "Kora",
    duree: 412,
  },
  {
    id: 12,
    titre: "Mali Dje",
    artiste: "Tinariwen",
    genre: "Touareg Blues",
    duree: 305,
  },
  {
    id: 13,
    titre: "Tounga",
    artiste: "Issa Bagayogo",
    genre: "Electro-Wassoulou",
    duree: 254,
  },
  {
    id: 14,
    titre: "Sindiely",
    artiste: "Babani Kon√©",
    genre: "Wassoulou",
    duree: 278,
  },
  {
    id: 15,
    titre: "Duga",
    artiste: "Vieux Farka Tour√©",
    genre: "Blues Malien",
    duree: 321,
  },
  { id: 16, titre: "Bamako", artiste: "Mylmo", genre: "Hip-Hop", duree: 195 },
  {
    id: 17,
    titre: "S√©gou",
    artiste: "Lobi Traor√©",
    genre: "Blues Malien",
    duree: 287,
  },
  {
    id: 18,
    titre: "Djelika",
    artiste: "Tata Bambo Kouyat√©",
    genre: "Mandingue",
    duree: 312,
  },
  {
    id: 19,
    titre: "N'teri",
    artiste: "Afel Bocoum",
    genre: "Mandingue",
    duree: 298,
  },
  {
    id: 20,
    titre: "Fama",
    artiste: "Sidiki Diabat√©",
    genre: "Mandingue",
    duree: 234,
  },
  {
    id: 21,
    titre: "Mali Koori",
    artiste: "Kandia Kouyat√©",
    genre: "Mandingue",
    duree: 356,
  },
  {
    id: 22,
    titre: "Djelia",
    artiste: "Nahawa Doumbia",
    genre: "Wassoulou",
    duree: 267,
  },
  {
    id: 23,
    titre: "Dianfa",
    artiste: "Super Biton de S√©gou",
    genre: "Orchestre",
    duree: 412,
  },
  {
    id: 24,
    titre: "Miriya",
    artiste: "Bako Dagnon",
    genre: "Mandingue",
    duree: 378,
  },
  {
    id: 25,
    titre: "Saya",
    artiste: "Bassekou Kouyat√©",
    genre: "Ngoni",
    duree: 289,
  },
  {
    id: 26,
    titre: "Fimani",
    artiste: "Djelimady Tounkara",
    genre: "Mandingue",
    duree: 324,
  },
  {
    id: 27,
    titre: "Bolo Kan",
    artiste: "Zoumana Tereta",
    genre: "Sokou",
    duree: 245,
  },
  {
    id: 28,
    titre: "Dibi",
    artiste: "Adja Soumano",
    genre: "Wassoulou",
    duree: 231,
  },
  {
    id: 29,
    titre: "Tcheba",
    artiste: "Baba Sissoko",
    genre: "Percussion",
    duree: 276,
  },
  {
    id: 30,
    titre: "Dankun",
    artiste: "Kasse Mady Diabat√©",
    genre: "Mandingue",
    duree: 342,
  },
  {
    id: 31,
    titre: "N'goni Ba",
    artiste: "Bassekou Kouyat√© & Ngoni Ba",
    genre: "Ngoni",
    duree: 298,
  },
  {
    id: 32,
    titre: "Dakan",
    artiste: "Moussa Diallo",
    genre: "Fusion",
    duree: 267,
  },
  {
    id: 33,
    titre: "Tjimoro",
    artiste: "Ballak√© Sissoko",
    genre: "Kora",
    duree: 412,
  },
  {
    id: 34,
    titre: "Mali Ba",
    artiste: "Super Djata Band",
    genre: "Mandingue",
    duree: 356,
  },
  {
    id: 35,
    titre: "Djamana",
    artiste: "Oumou Sangar√©",
    genre: "Wassoulou",
    duree: 289,
  },
  {
    id: 36,
    titre: "N'na",
    artiste: "Amy Koita",
    genre: "Mandingue",
    duree: 324,
  },
  {
    id: 37,
    titre: "Diawara",
    artiste: "Fatoumata Diawara",
    genre: "Afro-Folk",
    duree: 245,
  },
  {
    id: 38,
    titre: "Bougouni",
    artiste: "Samba Tour√©",
    genre: "Blues",
    duree: 231,
  },
  {
    id: 39,
    titre: "Toumani",
    artiste: "Toumani Diabat√© & Symmetric Orchestra",
    genre: "Mandingue",
    duree: 276,
  },
  {
    id: 40,
    titre: "Fanta",
    artiste: "Fanta Damba",
    genre: "Mandingue",
    duree: 342,
  },
  {
    id: 41,
    titre: "Mali Denhou",
    artiste: "Lassana Diabat√©",
    genre: "Balafon",
    duree: 298,
  },
  {
    id: 42,
    titre: "Diaou",
    artiste: "Mah Damba",
    genre: "Mandingue",
    duree: 267,
  },
  {
    id: 43,
    titre: "Tjini",
    artiste: "Tiecoura Traor√©",
    genre: "Wassoulou",
    duree: 412,
  },
  {
    id: 44,
    titre: "N'Diarabi",
    artiste: "Sory Kandia Kouyat√©",
    genre: "Mandingue",
    duree: 356,
  },
  {
    id: 45,
    titre: "Dounia",
    artiste: "Rokia Traor√©",
    genre: "Musique du monde",
    duree: 289,
  },
  {
    id: 46,
    titre: "Maliyo",
    artiste: "Alou Fan√©",
    genre: "Wassoulou",
    duree: 324,
  },
  {
    id: 47,
    titre: "Djekafo",
    artiste: "Djelimady Tounkara",
    genre: "Mandingue",
    duree: 245,
  },
  {
    id: 48,
    titre: "Tjigui",
    artiste: "Banzoumana Sissoko",
    genre: "Mandingue",
    duree: 231,
  },
  {
    id: 49,
    titre: "N'Diale",
    artiste: "Sali Sidib√©",
    genre: "Wassoulou",
    duree: 276,
  },
  {
    id: 50,
    titre: "Dibiye",
    artiste: "Kadidia Diabat√©",
    genre: "Mandingue",
    duree: 342,
  },
  {
    id: 51,
    titre: "Mali Kadi",
    artiste: "Mamadou Diabat√©",
    genre: "Kora",
    duree: 298,
  },
  {
    id: 52,
    titre: "Dankolo",
    artiste: "Super Rail Band",
    genre: "Mandingue",
    duree: 267,
  },
  {
    id: 53,
    titre: "Tjikan",
    artiste: "Djelimady Tounkara",
    genre: "Mandingue",
    duree: 412,
  },
  {
    id: 54,
    titre: "N'Djiriba",
    artiste: "K√©l√©tigui Diabat√©",
    genre: "Balafon",
    duree: 356,
  },
  {
    id: 55,
    titre: "Diank√©",
    artiste: "Djeneba Seck",
    genre: "Wassoulou",
    duree: 289,
  },
  {
    id: 56,
    titre: "Mali Sabou",
    artiste: "Modibo Kouyat√©",
    genre: "Mandingue",
    duree: 324,
  },
  {
    id: 57,
    titre: "Djandjon",
    artiste: "Bakary Soumano",
    genre: "Mandingue",
    duree: 245,
  },
  {
    id: 58,
    titre: "Tjiguita",
    artiste: "Batourou Sekou Kouyat√©",
    genre: "Mandingue",
    duree: 231,
  },
  {
    id: 59,
    titre: "N'Diani",
    artiste: "Fanta Sacko",
    genre: "Wassoulou",
    duree: 276,
  },
  {
    id: 60,
    titre: "Dibi",
    artiste: "Oumou Diabat√©",
    genre: "Mandingue",
    duree: 342,
  },
  {
    id: 61,
    titre: "Mali Kulu",
    artiste: "Yoro Diallo",
    genre: "Blues",
    duree: 298,
  },
  {
    id: 62,
    titre: "Dank√©",
    artiste: "Kouyat√© Sory Kandia",
    genre: "Mandingue",
    duree: 267,
  },
  {
    id: 63,
    titre: "Tjiguira",
    artiste: "Sidiba Diabat√©",
    genre: "Mandingue",
    duree: 412,
  },
  {
    id: 64,
    titre: "N'Diarabi",
    artiste: "Kass√© Mady Diabat√©",
    genre: "Mandingue",
    duree: 356,
  },
  {
    id: 65,
    titre: "Diank√©ba",
    artiste: "Doussou Bagayoko",
    genre: "Wassoulou",
    duree: 289,
  },
  {
    id: 66,
    titre: "Mali Den",
    artiste: "Balla Tounkara",
    genre: "Mandingue",
    duree: 324,
  },
  {
    id: 67,
    titre: "Djekafo",
    artiste: "N'Gou Bagayoko",
    genre: "Mandingue",
    duree: 245,
  },
  {
    id: 68,
    titre: "Tjikan",
    artiste: "Bakary Diabat√©",
    genre: "Mandingue",
    duree: 231,
  },
  {
    id: 69,
    titre: "N'Diale",
    artiste: "Oumou Dioubat√©",
    genre: "Wassoulou",
    duree: 276,
  },
  {
    id: 70,
    titre: "Dibiye",
    artiste: "Mariam Kouyat√©",
    genre: "Mandingue",
    duree: 342,
  },
  {
    id: 71,
    titre: "Mali Kadi",
    artiste: "Mamadou Diabat√©",
    genre: "Kora",
    duree: 298,
  },
  {
    id: 72,
    titre: "Dankolo",
    artiste: "Super Biton de S√©gou",
    genre: "Mandingue",
    duree: 267,
  },
  {
    id: 73,
    titre: "Tjigui",
    artiste: "Djelimady Tounkara",
    genre: "Mandingue",
    duree: 412,
  },
  {
    id: 74,
    titre: "N'Djiriba",
    artiste: "K√©l√©tigui Diabat√©",
    genre: "Balafon",
    duree: 356,
  },
  {
    id: 75,
    titre: "Diank√©",
    artiste: "Djeneba Seck",
    genre: "Wassoulou",
    duree: 289,
  },
  {
    id: 76,
    titre: "Mali Sabou",
    artiste: "Modibo Kouyat√©",
    genre: "Mandingue",
    duree: 324,
  },
  {
    id: 77,
    titre: "Djandjon",
    artiste: "Bakary Soumano",
    genre: "Mandingue",
    duree: 245,
  },
  {
    id: 78,
    titre: "Tjiguita",
    artiste: "Batourou Sekou Kouyat√©",
    genre: "Mandingue",
    duree: 231,
  },
  {
    id: 79,
    titre: "N'Diani",
    artiste: "Fanta Sacko",
    genre: "Wassoulou",
    duree: 276,
  },
  {
    id: 80,
    titre: "Dibi",
    artiste: "Oumou Diabat√©",
    genre: "Mandingue",
    duree: 342,
  },
  {
    id: 81,
    titre: "Mali Kulu",
    artiste: "Yoro Diallo",
    genre: "Blues",
    duree: 298,
  },
  {
    id: 82,
    titre: "Dank√©",
    artiste: "Kouyat√© Sory Kandia",
    genre: "Mandingue",
    duree: 267,
  },
  {
    id: 83,
    titre: "Tjiguira",
    artiste: "Sidiba Diabat√©",
    genre: "Mandingue",
    duree: 412,
  },
  {
    id: 84,
    titre: "N'Diarabi",
    artiste: "Kass√© Mady Diabat√©",
    genre: "Mandingue",
    duree: 356,
  },
  {
    id: 85,
    titre: "Diank√©ba",
    artiste: "Doussou Bagayoko",
    genre: "Wassoulou",
    duree: 289,
  },
  {
    id: 86,
    titre: "Mali Den",
    artiste: "Balla Tounkara",
    genre: "Mandingue",
    duree: 324,
  },
  {
    id: 87,
    titre: "Djekafo",
    artiste: "N'Gou Bagayoko",
    genre: "Mandingue",
    duree: 245,
  },
  {
    id: 88,
    titre: "Tjikan",
    artiste: "Bakary Diabat√©",
    genre: "Mandingue",
    duree: 231,
  },
  {
    id: 89,
    titre: "N'Diale",
    artiste: "Oumou Dioubat√©",
    genre: "Wassoulou",
    duree: 276,
  },
  {
    id: 90,
    titre: "Dibiye",
    artiste: "Mariam Kouyat√©",
    genre: "Mandingue",
    duree: 342,
  },
  {
    id: 91,
    titre: "Mali Kadi",
    artiste: "Mamadou Diabat√©",
    genre: "Kora",
    duree: 298,
  },
  {
    id: 92,
    titre: "Dankolo",
    artiste: "Super Biton de S√©gou",
    genre: "Mandingue",
    duree: 267,
  },
  {
    id: 93,
    titre: "Tjigui",
    artiste: "Djelimady Tounkara",
    genre: "Mandingue",
    duree: 412,
  },
  {
    id: 94,
    titre: "N'Djiriba",
    artiste: "K√©l√©tigui Diabat√©",
    genre: "Balafon",
    duree: 356,
  },
  {
    id: 95,
    titre: "Diank√©",
    artiste: "Djeneba Seck",
    genre: "Wassoulou",
    duree: 289,
  },
  {
    id: 96,
    titre: "Mali Sabou",
    artiste: "Modibo Kouyat√©",
    genre: "Mandingue",
    duree: 324,
  },
  {
    id: 97,
    titre: "Djandjon",
    artiste: "Bakary Soumano",
    genre: "Mandingue",
    duree: 245,
  },
  {
    id: 98,
    titre: "Tjiguita",
    artiste: "Batourou Sekou Kouyat√©",
    genre: "Mandingue",
    duree: 231,
  },
  {
    id: 99,
    titre: "N'Diani",
    artiste: "Fanta Sacko",
    genre: "Wassoulou",
    duree: 276,
  },
  {
    id: 100,
    titre: "Dibi",
    artiste: "Oumou Diabat√©",
    genre: "Mandingue",
    duree: 342,
  },
  {
    id: 101,
    titre: "Mali Kulu",
    artiste: "Yoro Diallo",
    genre: "Blues",
    duree: 298,
  },
  {
    id: 102,
    titre: "Dank√©",
    artiste: "Kouyat√© Sory Kandia",
    genre: "Mandingue",
    duree: 267,
  },
  {
    id: 103,
    titre: "Tjiguira",
    artiste: "Sidiba Diabat√©",
    genre: "Mandingue",
    duree: 412,
  },
  {
    id: 104,
    titre: "N'Diarabi",
    artiste: "Kass√© Mady Diabat√©",
    genre: "Mandingue",
    duree: 356,
  },
  {
    id: 105,
    titre: "Diank√©ba",
    artiste: "Doussou Bagayoko",
    genre: "Wassoulou",
    duree: 289,
  },
  {
    id: 106,
    titre: "Mali Den",
    artiste: "Balla Tounkara",
    genre: "Mandingue",
    duree: 324,
  },
  {
    id: 107,
    titre: "Djekafo",
    artiste: "N'Gou Bagayoko",
    genre: "Mandingue",
    duree: 245,
  },
];

//////////////////////////////////////////deepssek
// Variables globales
let currentPage = 1;
const songsPerPage = 12;
let filteredSongs = [...playlistMaliKadi];

// DOM Elements
const playlistContainer = document.getElementById("playlist-container");
const prevPageBtn = document.getElementById("prev-page");
const nextPageBtn = document.getElementById("next-page");
const pageNumbers = document.getElementById("page-numbers");
const genreFilter = document.getElementById("genre-filter");
const durationFilter = document.getElementById("duration-filter");
const searchInput = document.getElementById("search");
const addSongBtn = document.getElementById("add-song-btn");
const modal = document.getElementById("add-song-modal");
const closeBtn = document.querySelector(".close");
const songForm = document.getElementById("song-form");
const totalSongsEl = document.getElementById("total-songs");
const totalArtistsEl = document.getElementById("total-artists");
const totalGenresEl = document.getElementById("total-genres");
const totalDurationEl = document.getElementById("total-duration");

// Initialisation
document.addEventListener("DOMContentLoaded", () => {
  displaySongs();
  setupPagination();
  setupFilters();
  updateStats();

  // √âv√©nements
  prevPageBtn.addEventListener("click", goToPrevPage);
  nextPageBtn.addEventListener("click", goToNextPage);
  addSongBtn.addEventListener("click", openModal);
  closeBtn.addEventListener("click", closeModal);
  window.addEventListener("click", outsideClick);
  songForm.addEventListener("submit", addNewSong);
});

// Afficher les chansons
function displaySongs() {
  // Calculer l'index de d√©but et de fin
  const startIndex = (currentPage - 1) * songsPerPage;
  const endIndex = startIndex + songsPerPage;
  const paginatedSongs = filteredSongs.slice(startIndex, endIndex);

  // Vider le conteneur
  playlistContainer.innerHTML = "";

  // Ajouter chaque chanson
  paginatedSongs.forEach((song) => {
    const songCard = createSongCard(song);
    playlistContainer.appendChild(songCard);
  });
}

// Cr√©er une carte de chanson
function createSongCard(song) {
  const card = document.createElement("div");
  card.className = "song-card";

  // Convertir la dur√©e en minutes:secondes
  const minutes = Math.floor(song.duree / 60);
  const seconds = song.duree % 60;
  const durationFormatted = `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;

  // G√©n√©rer une couleur al√©atoire pour l'image de fond
  const colors = [
    "#e74c3c",
    "#3498db",
    "#2ecc71",
    "#f39c12",
    "#9b59b6",
    "#1abc9c",
  ];
  const randomColor = colors[Math.floor(Math.random() * colors.length)];

  card.innerHTML = `
        <div class="song-image" style="background-color: ${randomColor};">
            <div class="song-basic-info">
                <h3>${song.titre}</h3>
                <span class="song-artist">${song.artiste}</span>
            </div>
        </div>
        <div class="song-details">
            <div class="song-meta">
                <span class="song-genre">${song.genre}</span>
                <span class="song-duration">
                    <i class="fas fa-clock"></i> ${durationFormatted}
                </span>
            </div>
        </div>
    `;

  return card;
}
// Configuration de la pagination
function setupPagination() {
  const totalPages = Math.ceil(filteredSongs.length / songsPerPage);

  // D√©sactiver/activer les boutons pr√©c√©dent/suivant
  prevPageBtn.disabled = currentPage === 1;
  nextPageBtn.disabled = currentPage === totalPages || totalPages === 0;

  // Mettre √† jour les num√©ros de page
  pageNumbers.innerHTML = "";

  for (let i = 1; i <= totalPages; i++) {
    const pageNumber = document.createElement("span");
    pageNumber.className = `page-number ${i === currentPage ? "active" : ""}`;
    pageNumber.textContent = i;
    pageNumber.addEventListener("click", () => goToPage(i));
    pageNumbers.appendChild(pageNumber);
  }
}

// Aller √† une page sp√©cifique
function goToPage(page) {
  currentPage = page;
  displaySongs();
  setupPagination();
  window.scrollTo({ top: 0, behavior: "smooth" });
}

// Page pr√©c√©dente
function goToPrevPage() {
  if (currentPage > 1) {
    goToPage(currentPage - 1);
  }
}

// Page suivante
function goToNextPage() {
  const totalPages = Math.ceil(filteredSongs.length / songsPerPage);
  if (currentPage < totalPages) {
    goToPage(currentPage + 1);
  }
}

// Configuration des filtres
function setupFilters() {
  // Remplir le filtre de genre avec les genres uniques
  const genres = [...new Set(playlistMaliKadi.map((song) => song.genre))];
  genres.forEach((genre) => {
    const option = document.createElement("option");
    option.value = genre;
    option.textContent = genre;
    genreFilter.appendChild(option);
  });

  // √âcouteurs d'√©v√©nements pour les filtres
  genreFilter.addEventListener("change", applyFilters);
  durationFilter.addEventListener("change", applyFilters);
  searchInput.addEventListener("input", applyFilters);
}

// Appliquer les filtres
function applyFilters() {
  const genreValue = genreFilter.value;
  const durationValue = durationFilter.value;
  const searchValue = searchInput.value.toLowerCase();

  filteredSongs = playlistMaliKadi.filter((song) => {
    // Filtre par genre
    if (genreValue !== "all" && song.genre !== genreValue) {
      return false;
    }

    // Filtre par dur√©e
    if (durationValue !== "all") {
      if (durationValue === "short" && song.duree >= 180) {
        return false;
      }
      if (
        durationValue === "medium" &&
        (song.duree < 180 || song.duree > 300)
      ) {
        return false;
      }
      if (durationValue === "long" && song.duree <= 300) {
        return false;
      }
    }

    // Filtre de recherche
    if (
      searchValue &&
      !song.titre.toLowerCase().includes(searchValue) &&
      !song.artiste.toLowerCase().includes(searchValue)
    ) {
      return false;
    }

    return true;
  });

  // R√©initialiser √† la premi√®re page
  currentPage = 1;
  displaySongs();
  setupPagination();
  updateStats();
}

// Mettre √† jour les statistiques
function updateStats() {
  totalSongsEl.textContent = filteredSongs.length;

  // Nombre d'artistes uniques
  const uniqueArtists = new Set(filteredSongs.map((song) => song.artiste));
  totalArtistsEl.textContent = uniqueArtists.size;

  // Nombre de genres uniques
  const uniqueGenres = new Set(filteredSongs.map((song) => song.genre));
  totalGenresEl.textContent = uniqueGenres.size;

  // Dur√©e totale en heures:minutes:secondes
  const totalSeconds = filteredSongs.reduce((sum, song) => sum + song.duree, 0);
  const hours = Math.floor(totalSeconds / 3600);
  const minutes = Math.floor((totalSeconds % 3600) / 60);
  const seconds = totalSeconds % 60;
  totalDurationEl.textContent = `${hours}h ${minutes}m ${seconds}s`;
}

// Modal pour ajouter une chanson
function openModal() {
  modal.style.display = "block";
}

function closeModal() {
  modal.style.display = "none";
  songForm.reset();
}

function outsideClick(e) {
  if (e.target === modal) {
    closeModal();
  }
}

// Ajouter une nouvelle chanson
function addNewSong(e) {
  e.preventDefault();

  const title = document.getElementById("song-title").value;
  const artist = document.getElementById("song-artist").value;
  const genre = document.getElementById("song-genre").value;
  const duration = parseInt(document.getElementById("song-duration").value);

  // Cr√©er un nouvel ID (max existant + 1)
  const newId = Math.max(...playlistMaliKadi.map((song) => song.id)) + 1;

  // Ajouter la nouvelle chanson
  const newSong = {
    id: newId,
    titre: title,
    artiste: artist,
    genre: genre,
    duree: duration,
  };

  playlistMaliKadi.unshift(newSong);
  filteredSongs.unshift(newSong);

  // Mettre √† jour l'affichage
  displaySongs();
  setupPagination();
  updateStats();
  setupFilters(); // Pour mettre √† jour les options de genre si nouveau genre

  // Fermer le modal et r√©initialiser le formulaire
  closeModal();

  // Afficher un message de succ√®s
  alert("Chanson ajout√©e avec succ√®s!");
}

/*

// On r√©cup√®re les √©l√©ments HTML avec lesquels on veut interagir
const playlistElement = document.getElementById("playlist");
const currentTitreElement = document.getElementById("current-titre");
const currentArtisteElement = document.getElementById("current-artiste");
const playPauseBtn = document.getElementById("play-pause-btn");
const nextBtn = document.getElementById("next-btn");
const prevBtn = document.getElementById("prev-btn");

let currentPlaylist = [...playlistMaliKadi]; // On travaille sur une copie
let currentIndex = -1; // Index du morceau en cours
let isPlaying = false;

/**
 * Met √† jour le lecteur pour afficher les d√©tails d'une chanson.
 * @param {number} index - L'index de la chanson dans currentPlaylist.
 */

/*
function playSong(index) {
  if (index < 0 || index >= currentPlaylist.length) return;

  currentIndex = index;
  const chanson = currentPlaylist[index];

  // Mettre √† jour les infos "Now Playing"
  currentTitreElement.textContent = chanson.titre;
  currentArtisteElement.textContent = chanson.artiste;

  // Mettre √† jour l'ic√¥ne du bouton Play/Pause
  playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
  isPlaying = true;

  // Mettre en surbrillance le morceau actif dans la liste
  document.querySelectorAll(".playlist li").forEach((item, itemIndex) => {
    if (itemIndex === index) {
      item.classList.add("active");
    } else {
      item.classList.remove("active");
    }
  });
}

/**
 * Affiche une liste de chansons dans l'interface.
 * C'est la version "front-end" de votre fonction `afficherPlaylist`.
 * @param {Array} playlist - La liste de chansons √† afficher.
 */

/*
function renderPlaylist(playlist) {
  playlistElement.innerHTML = ""; // On vide la liste existante
  currentPlaylist = playlist; // On met √† jour la playlist courante

  playlist.forEach((chanson, index) => {
    const li = document.createElement("li");
    li.dataset.index = index; // On stocke l'index pour le retrouver au clic

    const minutes = Math.floor(chanson.duree / 60);
    const secondes = chanson.duree % 60;
    const formattedDuree = `${minutes}:${secondes < 10 ? "0" : ""}${secondes}`;

    li.innerHTML = `
            <div class="track-info">
                <span class="track-title">${chanson.titre}</span>
                <span class="track-artist">${chanson.artiste}</span>
            </div>
            <span class="track-duree">${formattedDuree}</span>
        `;

    // On ajoute un √©couteur d'√©v√©nement pour jouer la chanson au clic
    li.addEventListener("click", () => {
      playSong(index);
    });

    playlistElement.appendChild(li);
  });
}

// --- GESTION DES CONTR√îLES ---
function togglePlayPause() {
  if (currentIndex === -1) {
    // Si rien n'est s√©lectionn√©, on joue le premier morceau
    playSong(0);
    return;
  }

  isPlaying = !isPlaying;
  if (isPlaying) {
    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
    // Ici, on ajouterait la logique pour r√©ellement jouer le son : audio.play()
  } else {
    playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
    // Ici : audio.pause()
  }
}

function playNext() {
  let nextIndex = currentIndex + 1;
  if (nextIndex >= currentPlaylist.length) {
    nextIndex = 0; // On boucle au d√©but
  }
  playSong(nextIndex);
}

function playPrev() {
  let prevIndex = currentIndex - 1;
  if (prevIndex < 0) {
    prevIndex = currentPlaylist.length - 1; // On boucle √† la fin
  }
  playSong(prevIndex);
}

// On attache les fonctions aux clics sur les boutons
playPauseBtn.addEventListener("click", togglePlayPause);
nextBtn.addEventListener("click", playNext);
prevBtn.addEventListener("click", playPrev);

// --- INITIALISATION ---
// Au chargement de la page, on affiche la playlist compl√®te.
renderPlaylist(playlistMaliKadi);

alert(
  "Bienvenue sur Mali Kadi ! J'ai cr√©√© cette interface pour vous. Cliquez sur un titre pour le 'jouer'. Les fonctions de votre script original (comme la cr√©ation de radio) pourraient √™tre li√©es √† de nouveaux boutons !"
);


/*

// Afficher la liste des chansons
function afficherPlaylist(playlist) {
  console.log("---- Ma Playlist ----");
  playlist.forEach((chanson) => {
    console.log(`"${chanson.titre}" par ${chanson.artiste}`);
  });
  console.log("---------------------\n");
}

function creerRadio(nomChansonDepart, playlistSource) {
  const indexDepart = playlistSource.findIndex(
    (chanson) => chanson.titre === nomChansonDepart
  );

  if (indexDepart !== -1) {
    const radioPlaylist = playlistSource.slice(
      indexDepart + 1,
      indexDepart + 4
    );
    console.log(`Voici votre playlist avec ${nomChansonDepart}`);
    afficherPlaylist(radioPlaylist);
  } else {
    console.log("Chanson de d√©part non trouv√©e.");
  }
}

function creerRadioIntelligente(nomChansonDepart, playlistSource) {
  // Trouver la chanson de d√©part
  const chansonDepart = playlistSource.find(
    (chanson) => chanson.titre === nomChansonDepart
  );

  if (!chansonDepart) {
    console.log("Chanson de d√©part non trouv√©e.");
    return;
  }

  // Cr√©er une radio avec chansons du m√™me ARTISTE (hors la chanson de d√©part)
  const radioParArtiste = playlistSource.filter(
    (chanson) =>
      chanson.artiste === chansonDepart.artiste &&
      chanson.titre !== chansonDepart.titre
  );

  // Si pas assez de chansons du m√™me artiste, prendre par GENRE
  let radioPlaylist = radioParArtiste;

  if (radioPlaylist.length < 3) {
    radioPlaylist = playlistSource.filter(
      (chanson) =>
        chanson.genre === chansonDepart.genre &&
        chanson.titre !== chansonDepart.titre
    );
  }

  // Limiter √† 5 chansons maximum
  radioPlaylist = radioPlaylist.slice(0, 5);

  console.log(`üéß Radio cr√©√©e √† partir de "${nomChansonDepart}"`);
  afficherPlaylist(radioPlaylist);
}

creerRadioIntelligente("Dibi", playlistMaliKadi);

function supprimerGenre(genreASupprimer, playlistSource) {
  const playlistFiltree = playlistSource.filter(
    (chanson) => chanson.genre !== genreASupprimer
  );
  console.log(`Playlist apr√®s suppression du genre "${genreASupprimer}":`);
  afficherPlaylist(playlistFiltree);
  return playlistFiltree;
}

supprimerGenre("Mandingue", playlistMaliKadi);

function creerListePourVoyage(genreMusical, playlistSource) {
  const playlistRock = playlistSource.filter(
    (chanson) => chanson.genre === genreMusical
  );
  const listeVoyage = playlistRock.map((chanson) => {
    const minutes = Math.floor(chanson.duree / 60);
    const secondes = chanson.duree % 60;
    return `${chanson.titre} - ${chanson.artiste} (${minutes}:${
      secondes < 10 ? "0" : ""
    }${secondes})`;
  });

  console.log("---- Liste de Lecture pour le Voyage (Rock) ----");
  listeVoyage.forEach((item) => console.log(item));
  console.log("--------------------------------------------------\n");
}

creerListePourVoyage("Wassoulou", playlistMaliKadi);

function verifierPresenceArtistes(artistesAVerifier, playlistSource) {
  const artistesActuels = playlistSource.map((chanson) => chanson.artiste);
  artistesAVerifier.forEach((artiste) => {
    if (artistesActuels.includes(artiste)) {
      console.log(`L'artiste ${artiste} est d√©j√† dans la playlist.`);
    } else {
      console.log(`L'artiste ${artiste} peut √™tre ajout√©.`);
    }
  });
  console.log("\n");
}

verifierPresenceArtistes(["Queen", "The Beatles"], playlistMaliKadi);

function modifierPlaylist(playlistSource) {
  // Ajoutons "Hey Jude" des Beatles apr√®s "John Lennon"
  const indexJohnLennon = playlistSource.findIndex(
    (chanson) => chanson.artiste === "John Lennon"
  );
  if (indexJohnLennon !== -1) {
    playlistSource.splice(indexJohnLennon + 1, 0, {
      id: 9,
      titre: "Hey Jude",
      artiste: "The Beatles",
      genre: "Pop",
      duree: 431,
    });
  }

  // Rempla√ßons "One" de U2 par "With or Without You"
  const indexU2 = playlistSource.findIndex(
    (chanson) => chanson.titre === "One"
  );
  if (indexU2 !== -1) {
    playlistSource.splice(indexU2, 1, {
      id: 10,
      titre: "With or Without You",
      artiste: "U2",
      genre: "Rock",
      duree: 296,
    });
  }

  console.log("Playlist apr√®s ajouts et modifications :");
  afficherPlaylist(playlistSource);
}

modifierPlaylist(playlistMaliKadi);
*/
